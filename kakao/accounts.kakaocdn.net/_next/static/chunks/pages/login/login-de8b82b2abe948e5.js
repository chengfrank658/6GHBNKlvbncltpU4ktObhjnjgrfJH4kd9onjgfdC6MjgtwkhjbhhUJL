(self.webpackChunk_N_E = self.webpackChunk_N_E || []).push([[23329], { 38203: function (e, t, n) { "use strict"; var r; function i(e) { return Array.isArray(e) && e[0].code } function o(e) { return Array.isArray(e) && e[0].name } n.d(t, { G: function () { return s } }), function (e) { e[e.ACCOUNT_TERM = 1] = "ACCOUNT_TERM", e[e.SERVICE_TERM = 2] = "SERVICE_TERM", e[e.PRIVACY_INFO = 3] = "PRIVACY_INFO", e[e.PRIVACY_DAUM_CONNECT = 4] = "PRIVACY_DAUM_CONNECT", e[e.OPTIONAL_PROFILE = 5] = "OPTIONAL_PROFILE", e[e.MARKETING = 6] = "MARKETING", e[e.ADVERTISEMENT = 7] = "ADVERTISEMENT", e[e.SHIPPING_ADDRESS = 8] = "SHIPPING_ADDRESS", e[e.LOCATION = 9] = "LOCATION", e[e.UNIFY_ACCOUNT = 20] = "UNIFY_ACCOUNT", e[e.PRIVACY_INFO_WITH_TALK = 30] = "PRIVACY_INFO_WITH_TALK" }(r || (r = {})); var s = { hasProfileTerms: function (e) { return s.hasTerm(r.OPTIONAL_PROFILE, e) }, hasAdTerms: function (e) { return s.hasTerm(r.ADVERTISEMENT, e) }, hasTerm: function (e, t) { return i(t) ? t.some((function (t) { return t.codeType === e })) : o(t) ? t.some((function (t) { return t.name === String(e) })) : !!t[e] }, toOnlyCodes: function (e) { return i(e) ? e.map((function (e) { return e.code })) : o(e) ? e.map((function (e) { return e.value })) : Object.values(e) } } }, 33727: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return i } }); var r = n(67294); function i(e) { var t = e.timer; return (0, r.useEffect)((function () { return t.start(), function () { t.destory() } }), []), { time: t.remainTime } } }, 50353: function (e, t, n) { "use strict"; n.d(t, { l: function () { return h } }); var r = n(59499), i = n(67294), o = n(63730), s = n(94184), a = n.n(s), c = n(85893); function l(e) { var t = e.className, n = e.text, r = e.linkText, i = e.linkUrl, s = e.onHide, l = (0, o.Z)({ onClick: function () { return s() } }); return (0, c.jsx)(c.Fragment, { children: (0, c.jsxs)("div", { ref: l, className: a()("tooltip_comm", t && t), children: [(0, c.jsx)("p", { className: "txt_tooltip", children: n }), i && (0, c.jsx)("a", { href: i, target: "_blank", rel: "noreferrer", className: "link_more", children: r }), (0, c.jsx)("span", { className: "ico_account ico_arr" })] }) }) } function u(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function d(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? u(Object(n), !0).forEach((function (t) { (0, r.Z)(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : u(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } function h(e) { var t = (0, i.useState)(!1), n = t[0], r = t[1]; return { tooltip: n ? (0, c.jsx)(l, d(d({}, e), {}, { onHide: function () { return r(!1) } })) : void 0, showTooltip: n, toggleTooltip: function () { return r((function (e) { return !e })) } } } }, 25806: function (e, t, n) { "use strict"; n.d(t, { P: function () { return b } }); var r = n(59499), i = n(4730), o = n(67294), s = n(94184), a = n.n(s), c = n(83745), l = n(40153), u = n(42197), d = n(90614), h = n(14454), m = n(88186), f = n(71217); var g = n(63050), p = n.n(g), y = n(85893), v = ["className", "layoutStyle", "headerType", "showTitle", "showFooter", "children"]; function _(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function S(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? _(Object(n), !0).forEach((function (t) { (0, r.Z)(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : _(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } var b = (0, f.Pi)((function (e) { var t, n, r, s = e.className, f = e.layoutStyle, g = e.headerType, _ = e.showTitle, b = e.showFooter, k = e.children, x = (0, i.Z)(e, v), w = (0, l.oR)(), C = w.pageStore, E = (0, u.Z)({ scope: C.page || C.layout || "", default: "" }).t, j = E("header"), T = E("subtitle"); (0, d.Z)({ pageStore: C, title: j }), (0, c.f)(f || p().root), r = w.context.showDarkMode, (0, o.useLayoutEffect)((function () { r && window.document.body.classList.add("bg_dark") }), []); var P = C.canBack(), Z = !!w.hiddenPage || void 0, O = null !== g && void 0 !== g ? g : w.isMobile ? "mobile" : "logo", A = null !== (t = null !== (n = w.context.showFooter) && void 0 !== n ? n : b) && void 0 !== t && t; return (0, y.jsx)("div", S(S({}, x), {}, { className: a()(s && s, "container-doc"), "aria-hidden": Z, children: (0, y.jsxs)("div", { className: "inner_container", children: [T && (0, y.jsx)("strong", { className: "screen_out", children: T }), (0, y.jsxs)("main", { className: a()("doc-main"), children: ["logo" === O && (0, y.jsx)(h.Sn, {}), "mobile" === O && (0, y.jsx)(h.DJ, { showTitle: null !== _ && void 0 !== _ && _, title: j, back: P }), k] }), A && (0, y.jsx)(m.W, {})] }) })) })) }, 66920: function (e, t, n) { "use strict"; n.d(t, { q: function () { return m } }); var r = n(92777), i = n(82262), o = n(10748), s = n(45959), a = n(63553), c = n(37247), l = n(85009), u = n(92554), d = n(90835); function h(e) { var t = function () { if ("undefined" === typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" === typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(); return function () { var n, r = (0, c.Z)(e); if (t) { var i = (0, c.Z)(this).constructor; n = Reflect.construct(r, arguments, i) } else n = r.apply(this, arguments); return (0, a.Z)(this, n) } } var m = function (e) { (0, s.Z)(n, e); var t = h(n); function n(e) { var i; return (0, r.Z)(this, n), i = t.call(this, e), (0, o.Z)(i).initTiaraWith("restrictedReason", f), i } return (0, i.Z)(n, [{ key: "commonContext", get: function () { return this.contextAs() } }, { key: "blockedReasonContext", get: function () { return this.contextAs() } }, { key: "protectedReasonContext", get: function () { return this.contextAs() } }, { key: "start", value: function (e) { switch (e) { case "block": this.nextStep("blockedReason"); break; case "protect": this.nextStep("protectedReason") }return this } }, { key: "startFromLogin", value: function (e) { var t = { from: "login", continue: e.continueUrl, account_key: e.loginKey }; switch (e.status) { case u.Z.RESTRICTED_ACCOUNT: case u.Z.ACCESS_RESTRICTED_BLOCKED: this.router.goto("blocked_reason", t); break; case u.Z.ACCESS_RESTRICTED_PROTECTED_BY_USER: case u.Z.ACCESS_RESTRICTED_PROTECTED_BY_KAKAO: this.router.goto("protected_reason", t) } } }, { key: "gotoStart", value: function () { this.router.moveTo(this.commonContext.returnUrl, !0) } }, { key: "gotoFindPassword", value: function () { var e = this; this.client.call("create_find_password_token", { displayId: this.protectedReasonContext.displayId, accountKey: this.protectedReasonContext.accountKey, protectLevel: this.protectedReasonContext.protectLevel, skipCompletePage: this.protectedReasonContext.skipCompletePage }).then((function (t) { if (t.status === u.Z.SUCCESS) (0, d.G)("post", e.protectedReasonContext.findPasswordUrl, { params: t.findPasswordParams }); else e.dialogStore.errorAlert(t, (function () { return e.gotoStart() })) })) } }]), n }(l.u), f = { blockedReason: "restricted-reason-blocked", protectedReason: "restricted-reason-protected" } }, 85009: function (e, t, n) { "use strict"; n.d(t, { u: function () { return c } }); var r = n(92777), i = n(82262), o = n(59499), s = n(68949), a = n(66116), c = function () { function e(t) { (0, r.Z)(this, e), (0, o.Z)(this, "rootStore", void 0), this.rootStore = t, (0, s.makeObservable)(this, { step: s.computed }) } return (0, i.Z)(e, [{ key: "currentForm", get: function () { return this.pageStore.getState() } }, { key: "pageStore", get: function () { return this.rootStore.pageStore } }, { key: "dialogStore", get: function () { return this.rootStore.dialogStore } }, { key: "router", get: function () { return this.rootStore.router } }, { key: "client", get: function () { return this.rootStore.client } }, { key: "params", get: function () { return this.rootStore.params } }, { key: "context", get: function () { return this.rootStore.context } }, { key: "contextAs", value: function () { return this.rootStore.contextAs() } }, { key: "links", get: function () { return this.rootStore.links } }, { key: "loadDialogs", value: function (e, t) { this.rootStore.dialogStore.addModule(e, t) } }, { key: "tiara", get: function () { return this.rootStore.tiaraStore } }, { key: "initTiaraWith", value: function (e, t) { this.tiara.addTrack((0, a.$1)(e, t)) } }, { key: "initTiara", value: function (e) { this.tiara.addTrack(e) } }, { key: "page", get: function () { return this.pageStore.layout || "" } }, { key: "step", get: function () { return this.pageStore.page || "" } }, { key: "nextStep", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; this.pageStore.changePage(e, t) } }, { key: "showError", value: function (e, t, n) { t.errors ? Object.keys(t.errors).forEach((function (n) { e.$(n).invalidate(t.errors[n]) })) : this.dialogStore.errorAlert(t, n) } }]), e }() }, 19468: function (e, t, n) { "use strict"; n.d(t, { B: function () { return h } }); var r = n(50029), i = n(92777), o = n(82262), s = n(59499), a = n(87757), c = n.n(a), l = function () { function e(t) { (0, i.Z)(this, e), (0, s.Z)(this, "config", void 0), (0, s.Z)(this, "errorCount", 0), (0, s.Z)(this, "timeoutId", void 0), (0, s.Z)(this, "_stop", !1), this.config = t } return (0, o.Z)(e, [{ key: "poll", value: function () { var e = this; if (!this._stop) { var t = this.config.intervalSec || 1; this.timeoutId = setTimeout((0, r.Z)(c().mark((function t() { return c().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.prev = 0, t.next = 3, e.config.pollingApi(); case 3: t.sent ? e.poll() : e.stop(), t.next = 11; break; case 7: t.prev = 7, t.t0 = t.catch(0), e.errorCount++, e.poll(); case 11: case "end": return t.stop() } }), t, null, [[0, 7]]) }))), 1e3 * t) } } }, { key: "start", value: function () { this.timeoutId && this.stop(), this._stop = !1, this.poll() } }, { key: "stop", value: function () { this._stop = !0, this.timeoutId && (clearTimeout(this.timeoutId), this.timeoutId = void 0) } }]), e }(), u = n(68949), d = n(83322), h = function () { function e(t) { (0, i.Z)(this, e), (0, s.Z)(this, "config", void 0), (0, s.Z)(this, "startedAt", void 0), (0, s.Z)(this, "timeoutAt", void 0), (0, s.Z)(this, "currentSeconds", void 0), (0, s.Z)(this, "remainSeconds", void 0), (0, s.Z)(this, "intervalId", void 0), (0, s.Z)(this, "status", "none"), (0, s.Z)(this, "poller", void 0), this.config = t, this.startedAt = -1, this.currentSeconds = -1, this.timeoutAt = -1, this.remainSeconds = -1, t.polling && (this.poller = new l(t.polling)), (0, u.makeObservable)(this, { currentSeconds: u.observable, remainSeconds: u.observable, tick: u.action, init: u.action, start: u.action, stop: u.action, isStop: u.computed, remainTime: u.computed }) } return (0, o.Z)(e, [{ key: "isAfter", value: function (e) { return this.currentSeconds - this.startedAt >= e } }, { key: "remainTime", get: function () { var e = this.config.format; return e ? (0, d.vc)(new Date(1e3 * this.remainSeconds), e) : this.remainSeconds.toString() } }, { key: "isStop", get: function () { return "stop" === this.status } }, { key: "tick", value: function () { this.isStop || (this.currentSeconds = this.toSeconds(Date.now()), this.calculate(), 0 === this.remainSeconds && (this.config.onTimeout && this.config.onTimeout(), this.stop())) } }, { key: "init", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.config; this.status = "init", this.startedAt = this.toSeconds(Date.now()), this.timeoutAt = this.getTimeoutAt(e), this.currentSeconds = this.startedAt, this.calculate() } }, { key: "start", value: function () { var e = this; "none" !== this.status && "stop" !== this.status && (this.status = "running", this.destory(), this.intervalId = setInterval((function () { e.tick() }), 1e3), this.poller && this.poller.start()) } }, { key: "initAndStart", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.config; this.init(e), this.start() } }, { key: "stop", value: function () { this.status = "stop", this.destory() } }, { key: "destory", value: function () { this.intervalId && (clearInterval(this.intervalId), this.intervalId = void 0), this.poller && this.poller.stop() } }, { key: "calculate", value: function () { var e = this.timeoutAt - this.currentSeconds; this.remainSeconds = e > 0 ? e : 0 } }, { key: "toSeconds", value: function (e) { return Math.floor(e / 1e3) } }, { key: "getTimeoutAt", value: function (e) { return e.timeoutAt ? e.timeoutAt : e.timeout ? this.startedAt + e.timeout : 0 } }]), e }() }, 33199: function (e, t, n) { "use strict"; n.r(t), n.d(t, { default: function () { return ot } }); var r = n(59499), i = n(67294), o = n(19798), s = n(71217), a = n(40153), c = n(50029), l = n(92777), u = n(82262), d = n(10748), h = n(45959), m = n(63553), f = n(37247), g = n(87757), p = n.n(g), y = n(85009), v = n(92554), _ = n(68949), S = n(74450), b = n(19059), k = n(95939), x = n(19468); function w(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function C(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? w(Object(n), !0).forEach((function (t) { (0, r.Z)(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : w(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } function E(e) { var t = function () { if ("undefined" === typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" === typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(); return function () { var n, r = (0, f.Z)(e); if (t) { var i = (0, f.Z)(this).constructor; n = Reflect.construct(r, arguments, i) } else n = r.apply(this, arguments); return (0, m.Z)(this, n) } } var j = function (e) { (0, h.Z)(n, e); var t = E(n); function n(e) { var i; (0, l.Z)(this, n), i = t.call(this, e), (0, r.Z)((0, d.Z)(i), "dialogs", void 0), (0, r.Z)((0, d.Z)(i), "startPage", ""), (0, r.Z)((0, d.Z)(i), "emails", []), (0, r.Z)((0, d.Z)(i), "email", void 0), (0, r.Z)((0, d.Z)(i), "isTalkThird", !1), (0, r.Z)((0, d.Z)(i), "maskedPhoneNumber", ""), (0, r.Z)((0, d.Z)(i), "allowedCountryCount", 0), (0, r.Z)((0, d.Z)(i), "currentCountry", ""), (0, r.Z)((0, d.Z)(i), "token", ""), (0, r.Z)((0, d.Z)(i), "tmsTimer", void 0), (0, r.Z)((0, d.Z)(i), "emailTimer", void 0), (0, r.Z)((0, d.Z)(i), "tmsPollingParams", {}), i.dialogs = new T(i.dialogStore); var o = { format: "mm:ss", onTimeout: function () { return i.timeoutVerify() } }; return i.tmsTimer = new x.B(C(C({}, o), {}, { polling: { pollingApi: function () { return i.pollTms() } } })), i.emailTimer = new x.B(o), (0, d.Z)(i).initTiaraWith("AllowedCountryLoginTmsAction", P), i } return (0, u.Z)(n, [{ key: "exceedAllowedCountryLimit", get: function () { return this.allowedCountryCount >= 3 } }, { key: "gotoStart", value: function () { this.startPage ? this.pageStore.backUntil(this.startPage, { clear: !0 }) : location.reload() } }, { key: "nextStep", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, r = t; "selectEmail" !== e && this.step !== this.startPage || (this.startPage && this.pageStore.clear(this.startPage), r = C(C({}, t), {}, { blockForward: !0, back: this.startPage })), (0, S.Z)((0, f.Z)(n.prototype), "nextStep", this).call(this, e, r) } }, { key: "startFromLogin", value: function (e) { switch (this.startPage = this.step, this.allowedCountryCount = e.allowedCountryCount, this.currentCountry = e.currentCountry, this.emails = e.emails, e.viewType) { case "tms_verify": this.isTalkThird = e.isTalkThird, this.maskedPhoneNumber = e.maskedPhoneNumber, this.startWithTms(); break; case "email_select": this.startWithEmail() } } }, { key: "startWithTms", value: function () { var e = this; this.client.call("send_tms_for_allow_country", {}).then((function (t) { switch (t.status) { case v.Z.SUCCESS: e.token = t.token, e.nextStep("waitForTmsStatus"), e.tmsTimer.init({ timeout: t.expireSeconds }); break; case v.Z.EXCEED_REQUEST_LIMIT: e.dialogs.exceedAllowCountryLimit((function () { return e.gotoStart() })); break; default: e.dialogs.errorAlert(t, (function () { return e.gotoStart() })) } })) } }, { key: "addTmsPollingParam", value: function (e) { this.tmsPollingParams = C(C({}, this.tmsPollingParams), {}, (0, r.Z)({}, e.name, String(e.value))) } }, { key: "pollTms", value: function () { var e = (0, c.Z)(p().mark((function e() { var t, n, r = this; return p().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this.client.call("check_tms_for_allow_country", C({ token: this.token }, this.tmsPollingParams)); case 2: t = e.sent, e.t0 = t.status, e.next = e.t0 === v.Z.SUCCESS ? 6 : e.t0 === v.Z.ALLOWED_COUNTRY_WAIT ? 17 : e.t0 === v.Z.ALLOWED_COUNTRY_BLOCKED ? 18 : e.t0 === v.Z.EXCEED_LOGIN_LIMIT ? 20 : e.t0 === v.Z.EXPIRED_VERIFY_TOKEN ? 22 : 24; break; case 6: return e.next = 8, this.client.call("expire_tms_for_allow_country", { token: this.token }); case 8: n = e.sent, e.t1 = n.status, e.next = e.t1 === v.Z.SUCCESS || e.t1 === v.Z.EXPIRED_VERIFY_TOKEN ? 12 : 14; break; case 12: return this.router.moveTo(t.continueUrl, !0), e.abrupt("break", 16); case 14: return this.dialogs.errorAlert(n, (function () { return r.gotoStart() })), e.abrupt("break", 16); case 16: return e.abrupt("return", !1); case 17: return e.abrupt("return", !0); case 18: return this.dialogs.blockAllowCountry((function () { return r.gotoStart() })), e.abrupt("return", !1); case 20: return this.dialogs.exceedAllowCountryLimit((function () { return r.gotoStart() })), e.abrupt("return", !1); case 22: return this.dialogs.timeoutAllowCountry((function () { return r.gotoStart() })), e.abrupt("return", !1); case 24: return this.dialogs.errorAlert(t, (function () { return r.gotoStart() })), e.abrupt("return", !1); case 26: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }() }, { key: "startWithEmail", value: function () { this.nextStep("selectEmail") } }, { key: "requestEmailPasscode", value: function (e) { var t = this, n = e.values().email; this.client.call("send_passcode_for_allow_country", { verifyMethod: "email", email: n, reissue: !1 }).then((function (e) { switch (e.status) { case v.Z.SUCCESS: t.email = t.emails.find((function (e) { return e.email === n })), t.token = e.token, t.nextStep("verifyEmailPasscode"), t.emailTimer.init({ timeout: e.expireSeconds }); break; case v.Z.EXCEED_REQUEST_LIMIT: t.dialogs.exceedAllowCountryLimit((function () { return t.gotoStart() })); break; default: t.dialogs.errorAlert(e, (function () { return t.gotoStart() })) } })) } }, { key: "resendEmailPasscode", value: function (e) { var t, n = this; this.client.call("send_passcode_for_allow_country", { verifyMethod: "email", email: null === (t = this.email) || void 0 === t ? void 0 : t.email, reissue: !0 }).then((function (t) { switch (t.status) { case v.Z.SUCCESS: e.clearAndFocus(k.FU.emailPasscode.name), n.token = t.token, n.emailTimer.init({ timeout: t.expireSeconds }); break; case v.Z.EXCEED_REQUEST_LIMIT: n.dialogs.exceedAllowCountryLimit((function () { return n.gotoStart() })); break; default: n.dialogs.errorAlert(t, (function () { return n.gotoStart() })) } })) } }, { key: "verifyEmailPasscode", value: function (e) { var t, n = this; this.client.call("check_passcode_for_allow_country", C({ verifyMethod: "email", email: null === (t = this.email) || void 0 === t ? void 0 : t.email, token: this.token }, e.values())).then((function (t) { switch (t.status) { case v.Z.SUCCESS: n.router.moveTo(t.continueUrl, !0); break; case v.Z.EXCEED_REQUEST_LIMIT: n.dialogs.exceedAllowCountryLimit((function () { return n.gotoStart() })); break; case v.Z.INVALID_PASSCODE: n.dialogs.errorAlert(t, (function () { return e.clearAndFocus(k.FU.emailPasscode.name) })); break; default: n.dialogs.errorAlert(t, (function () { return n.gotoStart() })) } })) } }, { key: "timeoutVerify", value: function () { var e = this; this.dialogs.timeoutAllowCountry((function () { return e.gotoStart() })) } }]), n }(y.u), T = function (e) { (0, h.Z)(n, e); var t = E(n); function n() { return (0, l.Z)(this, n), t.apply(this, arguments) } return (0, u.Z)(n, [{ key: "resendEmail", value: function (e) { this.store.showDialog({ type: "resendEmail", onSubmit: e }) } }, { key: "exceedAllowCountryLimit", value: function (e) { this.store.showDialog({ type: "exceedAllowCountryLimit", onSubmit: e, onClose: e }) } }, { key: "timeoutAllowCountry", value: function (e) { this.store.showDialog({ type: "verifyTimeout", onSubmit: e, onClose: e }) } }, { key: "blockAllowCountry", value: function (e) { this.store.showDialog({ type: "blockAllowCountry", onSubmit: e, onClose: e }) } }]), n }(b.v), P = { selectEmail: "allow-country-email-login-select", verifyEmailPasscode: "allow-country-email-login-verify", waitForTmsStatus: "allow-country-tms-login" }; var Z = n(66920); function O(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function A(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? O(Object(n), !0).forEach((function (t) { (0, r.Z)(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : O(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } function N(e) { var t = function () { if ("undefined" === typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" === typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(); return function () { var n, r = (0, f.Z)(e); if (t) { var i = (0, f.Z)(this).constructor; n = Reflect.construct(r, arguments, i) } else n = r.apply(this, arguments); return (0, m.Z)(this, n) } } var I = function (e) { (0, h.Z)(n, e); var t = N(n); function n(e) { var i; (0, l.Z)(this, n), i = t.call(this, e), (0, r.Z)((0, d.Z)(i), "dialogs", void 0), (0, r.Z)((0, d.Z)(i), "twoStepVerificationClient", void 0), (0, r.Z)((0, d.Z)(i), "startPage", ""), (0, r.Z)((0, d.Z)(i), "maskedEmail", ""), (0, r.Z)((0, d.Z)(i), "maskedPhoneNumber", ""), (0, r.Z)((0, d.Z)(i), "token", ""), (0, r.Z)((0, d.Z)(i), "tmsPollingParams", {}), (0, r.Z)((0, d.Z)(i), "tmsTimer", void 0), (0, r.Z)((0, d.Z)(i), "emailTimer", void 0), (0, r.Z)((0, d.Z)(i), "smsTimer", void 0), i.dialogs = new L(i.dialogStore), i.twoStepVerificationClient = new R((0, d.Z)(i)); var o = { format: "mm:ss", onTimeout: function () { return i.dialogs.timeoutTwoStepVerification((function () { return i.gotoStart() })) } }; return i.tmsTimer = new x.B(A(A({}, o), {}, { polling: { pollingApi: function () { return i.checkTms() } } })), i.emailTimer = new x.B(o), i.smsTimer = new x.B(o), (0, d.Z)(i).initTiaraWith("twoStepVerification", U), i } return (0, u.Z)(n, [{ key: "gotoStart", value: function () { this.startPage ? this.pageStore.backUntil(this.startPage, { clear: !0 }) : location.reload() } }, { key: "nextStep", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, r = t; "emailTwoStepVerification" !== e && this.step !== this.startPage || (this.startPage && this.pageStore.clear(this.startPage), r = A(A({}, t), {}, { blockForward: !0, back: this.startPage })), (0, S.Z)((0, f.Z)(n.prototype), "nextStep", this).call(this, e, r) } }, { key: "startFromLogin", value: function (e) { this.startPage = this.step, this.maskedPhoneNumber = e.maskedPhoneNumber, this.maskedEmail = e.maskedEmail, this.sendWith(e.method) } }, { key: "sendWith", value: function (e) { var t = this; this.twoStepVerificationClient.sendForLogin(e).then((function (n) { switch (n.status) { case v.Z.SUCCESS: switch (t.token = n.token, e) { case "tms": t.nextStep("tmsTwoStepVerification"), t.tmsTimer.init({ timeout: n.expireSeconds }); break; case "sms": t.nextStep("smsTwoStepVerification"), t.smsTimer.init({ timeout: n.expireSeconds }); break; case "email": t.nextStep("emailTwoStepVerification"), t.emailTimer.init({ timeout: n.expireSeconds }) }break; case v.Z.EXCEED_REQUEST_LIMIT: t.dialogs.exceedRequestLimit((function () { return t.gotoStart() })); break; default: t.dialogs.errorAlert(n, (function () { return t.gotoStart() })) } })) } }, { key: "updateTmsPollingParams", value: function (e) { var t = this; (0, _.runInAction)((function () { t.tmsPollingParams = A(A({}, t.tmsPollingParams), {}, (0, r.Z)({}, e.name, String(e.value))) })) } }, { key: "checkTms", value: function () { var e = (0, c.Z)(p().mark((function e() { var t, n, r = this; return p().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this.twoStepVerificationClient.verifyTmsForLogin(this.token, this.tmsPollingParams.isRememberBrowser); case 2: t = e.sent, e.t0 = t.status, e.next = e.t0 === v.Z.SUCCESS ? 6 : e.t0 === v.Z.TWO_STEP_VERIFICATION_REQUIRED ? 17 : e.t0 === v.Z.TWO_STEP_VERIFICATION_BLOCKED ? 18 : e.t0 === v.Z.EXPIRED_VERIFY_TOKEN ? 20 : 22; break; case 6: return e.next = 8, this.twoStepVerificationClient.expireTmsForLogin(this.token); case 8: n = e.sent, e.t1 = n.status, e.next = e.t1 === v.Z.SUCCESS || e.t1 === v.Z.EXPIRED_VERIFY_TOKEN ? 12 : 14; break; case 12: return this.onComplete(t), e.abrupt("break", 16); case 14: return this.dialogs.errorAlert(n, (function () { return r.gotoStart() })), e.abrupt("break", 16); case 16: return e.abrupt("return", !1); case 17: return e.abrupt("return", !0); case 18: return this.dialogs.blockedTwoStepVerification((function () { return r.gotoStart() })), e.abrupt("return", !1); case 20: return this.dialogs.timeoutTwoStepVerification((function () { return r.gotoStart() })), e.abrupt("return", !1); case 22: return this.dialogs.errorAlert(t, (function () { return r.gotoStart() })), e.abrupt("return", !1); case 24: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }() }, { key: "gotoVerifyEmail", value: function () { this.sendWith("email") } }, { key: "resendSMS", value: function (e) { var t = this; this.dialogs.resendSmsPasscode((function () { t.twoStepVerificationClient.sendPasscodeForLogin("sms", !0).then((function (n) { switch (n.status) { case v.Z.SUCCESS: t.token = n.token, e.clearAndFocus(k.FU.smsPasscode.name), t.smsTimer.init({ timeout: n.expireSeconds }); break; case v.Z.EXCEED_REQUEST_LIMIT: t.dialogs.exceedRequestLimit((function () { return t.gotoStart() })); break; default: t.dialogs.errorAlert(n, (function () { return t.gotoStart() })) } })) })) } }, { key: "checkSMSPasscode", value: function (e) { var t = this, n = e.values(); this.twoStepVerificationClient.verifyPasscodeForLogin("sms", this.token, n.passcode, n.isRememberBrowser).then((function (n) { switch (n.status) { case v.Z.SUCCESS: t.onComplete(n); break; case v.Z.INVALID_PASSCODE: t.dialogs.errorAlert(n, (function () { e.clearAndFocus(k.FU.smsPasscode.name) })); break; case v.Z.EXCEED_REQUEST_LIMIT: t.dialogs.exceedRequestLimit((function () { return t.gotoStart() })); break; default: t.dialogs.errorAlert(n, (function () { return t.gotoStart() })) } })) } }, { key: "resendEmailPasscode", value: function (e) { var t = this; this.dialogs.resendEmailPasscode((function () { t.twoStepVerificationClient.sendPasscodeForLogin("email", !0).then((function (n) { switch (n.status) { case v.Z.SUCCESS: t.token = n.token, e.clearAndFocus(k.FU.emailPasscode.name), t.emailTimer.init({ timeout: n.expireSeconds }); break; case v.Z.EXCEED_REQUEST_LIMIT: t.dialogs.exceedRequestLimit((function () { return t.gotoStart() })); break; default: t.dialogs.errorAlert(n, (function () { return t.gotoStart() })) } })) })) } }, { key: "checkEmailPasscode", value: function (e) { var t = this, n = e.values(); this.twoStepVerificationClient.verifyPasscodeForLogin("email", this.token, n.passcode, n.isRememberBrowser).then((function (n) { switch (n.status) { case v.Z.SUCCESS: t.onComplete(n); break; case v.Z.INVALID_PASSCODE: t.dialogs.errorAlert(n, (function () { return e.clearAndFocus(k.FU.emailPasscode.name) })); break; case v.Z.EXCEED_REQUEST_LIMIT: t.dialogs.exceedRequestLimit((function () { return t.gotoStart() })); break; default: t.dialogs.errorAlert(n, (function () { return t.gotoStart() })) } })) } }, { key: "onComplete", value: function (e) { this.router.moveTo(e.continueUrl) } }]), n }(y.u), R = function () { function e(t) { (0, l.Z)(this, e), (0, r.Z)(this, "client", void 0), this.client = t.rootStore.client } return (0, u.Z)(e, [{ key: "sendForLogin", value: function (e) { return "tms" === e ? this.sendTmsForLogin() : this.sendPasscodeForLogin(e, !1) } }, { key: "sendTmsForLogin", value: function () { return this.client.call("send_tms_for_two_step_verification") } }, { key: "verifyTmsForLogin", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return this.client.call("check_tms_for_two_step_verification", { token: e, isRememberBrowser: t }) } }, { key: "expireTmsForLogin", value: function (e) { return this.client.call("expire_tms_for_two_step_verification", { token: e }) } }, { key: "sendPasscodeForLogin", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return this.client.call("send_passcode_for_two_step_verification", { verifyMethod: e, reissue: t }) } }, { key: "verifyPasscodeForLogin", value: function (e, t, n) { var r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; return this.client.call("verify_passcode_for_two_step_verification", { verifyMethod: e, token: t, passcode: n, isRememberBrowser: r }) } }]), e }(), L = function (e) { (0, h.Z)(n, e); var t = N(n); function n() { return (0, l.Z)(this, n), t.apply(this, arguments) } return (0, u.Z)(n, [{ key: "timeoutTwoStepVerification", value: function (e) { this.store.showDialog({ type: "timeout", onSubmit: e, onClose: e }) } }, { key: "exceedRequestLimit", value: function (e) { this.store.showDialog({ type: "exceedRequestLimit", onSubmit: e, onClose: e }) } }, { key: "blockedTwoStepVerification", value: function (e) { this.store.showDialog({ type: "blockedTwoStepVerification", onSubmit: e, onClose: e }) } }, { key: "resendSmsPasscode", value: function (e) { this.store.showDialog({ type: "resendSmsPasscode", onSubmit: e }) } }, { key: "resendEmailPasscode", value: function (e) { this.store.showDialog({ type: "resendEmailPasscode", onSubmit: e }) } }]), n }(b.v), U = { tmsTwoStepVerification: "two-step-verification-tms-login", smsTwoStepVerification: "two-step-verification-sms-login", emailTwoStepVerification: "two-step-verification-email-login" }; var D = n(38203); function F(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function V(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? F(Object(n), !0).forEach((function (t) { (0, r.Z)(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : F(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } function B(e) { var t = function () { if ("undefined" === typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" === typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(); return function () { var n, r = (0, f.Z)(e); if (t) { var i = (0, f.Z)(this).constructor; n = Reflect.construct(r, arguments, i) } else n = r.apply(this, arguments); return (0, m.Z)(this, n) } } var W = function (e) { (0, h.Z)(n, e); var t = B(n); function n(e) { var i; return (0, l.Z)(this, n), i = t.call(this, e), (0, r.Z)((0, d.Z)(i), "dialogs", void 0), (0, r.Z)((0, d.Z)(i), "allowCountryStore", void 0), (0, r.Z)((0, d.Z)(i), "restrictedReasonStore", void 0), (0, r.Z)((0, d.Z)(i), "twoStepVerificationStore", void 0), (0, r.Z)((0, d.Z)(i), "daumSsoEnabled", void 0), (0, r.Z)((0, d.Z)(i), "needCountryCode", void 0), (0, r.Z)((0, d.Z)(i), "showCaptcha", void 0), (0, r.Z)((0, d.Z)(i), "loginInfo", {}), (0, r.Z)((0, d.Z)(i), "talkPhoneNumber", ""), (0, r.Z)((0, d.Z)(i), "additionalAuthParams", {}), (0, r.Z)((0, d.Z)(i), "additionalAuthShowSubmit", !1), (0, r.Z)((0, d.Z)(i), "additionalAuthTimer", void 0), (0, r.Z)((0, d.Z)(i), "talkLoginToken", ""), (0, r.Z)((0, d.Z)(i), "isTalkLoginError", !1), (0, r.Z)((0, d.Z)(i), "talkLoginTimer", void 0), (0, r.Z)((0, d.Z)(i), "isRunning", !1), i.dialogs = new K(i.dialogStore), i.restrictedReasonStore = new Z.q(e), i.allowCountryStore = new j(e), i.twoStepVerificationStore = new I(i.rootStore), i.additionalAuthTimer = i.createAdditionAuthTimer(), i.talkLoginTimer = i.createTalkLoginTimer(), i.needCountryCode = !1, i.showCaptcha = !1, (0, _.makeObservable)((0, d.Z)(i), { needCountryCode: _.observable, showCaptcha: _.observable, additionalAuthShowSubmit: _.observable, isTalkLoginError: _.observable }), (0, d.Z)(i).initTiaraWith("login", M), i } return (0, u.Z)(n, [{ key: "loginContext", get: function () { return this.contextAs() } }, { key: "guardianContext", get: function () { return this.contextAs() } }, { key: "isGuardianLogin", get: function () { return !!this.context.guardianToken } }, { key: "start", value: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; if (this.isGuardianLogin) this.loginByGuardianToken(this.guardianContext.guardianToken); else { var n = "login"; this.loginContext.showWebTalkLogin ? n = "webTalkLogin" : this.loginContext.showDeviceFormLogin && (n = "deviceFormLogin"), this.loginContext.needCaptcha && (this.showCaptcha = !0), "web" === this.loginContext.webType && void 0 === this.daumSsoEnabled && this.client.isConnected("check_daum_sso").then((function (t) { e.daumSsoEnabled = t })); var r = {}; t && (r = { back: n }), this.nextStep(n, V(V({}, r), {}, { clearForward: !0 })) } return this } }, { key: "showPasswordAndStaySign", get: function () { return !0 } }, { key: "gotoQRLogin", value: function (e) { this.router.gotoQRLogin({ continue: this.loginContext.continueUrl, stay_signed_in: e.$(k.FU.staySignedIn.name).value, append_stay_signed_in: this.context.appendStaySignedIn }) } }, { key: "login", value: function (e) { var t = this; if (!this.isRunning) { this.isRunning = !0; var n = !1 !== this.daumSsoEnabled, r = e.values(); this.loginInfo = V(V({}, r), {}, { loginKey: String(r.loginKey || r.loginPhoneNumber || "").trim(), password: String(r.password || "").trim(), activeSso: n, loginUrl: this.loginContext.loginUrl }); var i = function n(r) { switch (r.status) { case v.Z.SUCCESS: e.reset(), t.onComplete(r); break; case v.Z.COUNTRY_CODE_REQUIRED: (0, _.runInAction)((function () { e.$(k.FU.password.name).clear(), t.loginContext.showDeviceFormLogin || (t.needCountryCode = !0), t.processError(e, r) })); break; case v.Z.NEED_CAPTCHA: case v.Z.INVALID_CAPTCHA_RESPONSE: (0, _.runInAction)((function () { e.resetCaptchaField(), t.showCaptcha = !0 })); break; case v.Z.ADDITIONAL_AUTH_REQUIRED: t.startAdditionalAuth(r); break; case v.Z.TWO_STEP_VERIFICATION_REQUIRED: t.twoStepVerificationStore.startFromLogin(r); break; case v.Z.ALLOWED_COUNTRY_REQUIRED: t.allowCountryStore.startFromLogin(r); break; case v.Z.REQUIRE_TERMS: (0, _.runInAction)((function () { t.showCaptcha = !1 })), t.loginWithTerms(r.terms, n); break; case v.Z.REQUIRE_GUARDIAN_AGREE: e.reset(), t.router.moveTo(r.guardianUrl); break; case v.Z.DORMANT: t.exitDormantWithPassword((function () { t.login(e) })); break; case v.Z.ACCESS_RESTRICTED_BLOCKED: case v.Z.ACCESS_RESTRICTED_PROTECTED_BY_USER: case v.Z.ACCESS_RESTRICTED_PROTECTED_BY_KAKAO: e.reset(), t.loginContext.showDeviceFormLogin ? t.dialogs.deviceLoginError() : t.restrictedReasonStore.startFromLogin(r); break; case v.Z.INVALID_STATUS: location.reload(); break; default: (0, _.runInAction)((function () { e.resetCaptchaField() })), t.processError(e, r) } }, o = function () { t.isRunning = !1 }; "web" === this.loginContext.webType ? this.client.call("authenticate", this.loginInfo).then(i).finally(o) : this.client.call("authenticate_by_auth", this.loginInfo).then(i).finally(o) } } }, { key: "processError", value: function (e, t) { e.$(k.FU.loginKey.name).focus(); var n = t.title; t.message && (n += "\\n".concat(t.message)), n && e.invalidate(n) } }, { key: "loginByGuardianToken", value: function (e) { var t = this; this.client.call("authenticate_by_guardian", { token: e }).then((function (e) { switch (e.status) { case v.Z.SUCCESS: t.onComplete(e); break; case v.Z.ADDITIONAL_AUTH_REQUIRED: t.startAdditionalAuth(e); break; case v.Z.TWO_STEP_VERIFICATION_REQUIRED: t.twoStepVerificationStore.startFromLogin(e); break; case v.Z.ALLOWED_COUNTRY_REQUIRED: t.allowCountryStore.startFromLogin(e); break; case v.Z.RESTRICTED_ACCOUNT: case v.Z.ACCESS_RESTRICTED_BLOCKED: case v.Z.ACCESS_RESTRICTED_PROTECTED_BY_USER: case v.Z.ACCESS_RESTRICTED_PROTECTED_BY_KAKAO: t.restrictedReasonStore.startFromLogin(e); break; default: t.gotoLogin() } })) } }, { key: "onComplete", value: function (e) { this.router.moveTo(e.continueUrl) } }, { key: "loginWithTerms", value: function (e, t) { var n, r = this, i = null === (n = e.find((function (e) { return e.link }))) || void 0 === n ? void 0 : n.link; this.dialogs.agreeTalkPhoneNumberTerm(i, (function () { r.client.call("agree_terms", V(V({}, r.loginInfo), {}, { agreeTerms: D.G.toOnlyCodes(e) })).then(t) })) } }, { key: "exitDormantWithPassword", value: function (e) { var t = this; this.dialogs.exitDormant((function () { t.client.call("exit_dormant_with_password", t.loginInfo).then((function (n) { if (n.status === v.Z.SUCCESS) e(); else t.dialogs.errorAlert(n) })) })) } }, { key: "startAdditionalAuth", value: function (e) { this.additionalAuthParams = { token: e.token }, this.talkPhoneNumber = e.phoneNumber, this.additionalAuthTimer.init(), this.nextStep("additionalAuth") } }, { key: "createAdditionAuthTimer", value: function () { var e = this, t = new x.B({ timeout: 55, polling: { pollingApi: function () { return e.additionalAuth(!1) } } }); return (0, _.when)((function () { return t.isAfter(5) }), (function () { e.additionalAuthShowSubmit = !0 })), t } }, { key: "additionalAuth", value: function () { var e = (0, c.Z)(p().mark((function e(t) { var n, r, i = this; return p().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this.client.call("check_additional_auth", this.additionalAuthParams); case 2: n = e.sent, e.t0 = n.status, e.next = e.t0 === v.Z.SUCCESS ? 6 : e.t0 === v.Z.ADDITIONAL_AUTH_REQUIRED ? 17 : e.t0 === v.Z.ADDITIONAL_AUTH_BLOCKED ? 19 : 21; break; case 6: return e.next = 8, this.client.call("expire_additional_auth", this.additionalAuthParams); case 8: r = e.sent, e.t1 = r.status, e.next = e.t1 === v.Z.SUCCESS || e.t1 === v.Z.EXPIRED_VERIFY_TOKEN ? 12 : 14; break; case 12: return this.onComplete(n), e.abrupt("break", 16); case 14: return this.dialogs.errorAlert(r, (function () { return i.gotoLogin() })), e.abrupt("break", 16); case 16: return e.abrupt("return", !1); case 17: return t && this.dialogs.requireAdditionalAuth(), e.abrupt("return", !0); case 19: return this.dialogs.blockedAdditionalAuth((function () { return i.gotoLogin() })), e.abrupt("return", !1); case 21: return this.dialogStore.errorAlert(n, (function () { return i.gotoLogin() })), e.abrupt("return", !1); case 23: case "end": return e.stop() } }), e, this) }))); return function (t) { return e.apply(this, arguments) } }() }, { key: "gotoLogin", value: function () { this.isGuardianLogin ? this.router.moveTo(this.guardianContext.loginUrl) : this.start(!0) } }, { key: "loginByTalk", value: function () { var e = this; "running" !== this.talkLoginTimer.status && this.client.call("create_token_for_talk_login").then((function (t) { if (t.status === v.Z.SUCCESS) e.talkLoginTimer.initAndStart({ timeout: 300 }), e.talkLoginToken = t.token, t.talkLoginScheme && e.router.moveTo(t.talkLoginScheme); else e.isTalkLoginError = !0 })) } }, { key: "createTalkLoginTimer", value: function () { var e = this, t = new x.B({ timeout: 300, polling: { pollingApi: function () { return e.pollTalkLogin() } } }); return (0, _.when)((function () { return t.isAfter(10) }), (function () { e.isTalkLoginError = !0 })), t } }, { key: "pollTalkLogin", value: function () { var e = (0, c.Z)(p().mark((function e() { var t, n = this; return p().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this.client.call("check_talk_login", { token: this.talkLoginToken, loginUrl: this.loginContext.loginUrl, activeSso: !1 !== this.daumSsoEnabled }); case 2: t = e.sent, e.t0 = t.status, e.next = e.t0 === v.Z.SUCCESS ? 6 : e.t0 === v.Z.WEB_TALK_LOGIN_REQUIRED ? 8 : e.t0 === v.Z.DORMANT ? 9 : e.t0 === v.Z.ACCESS_RESTRICTED_BLOCKED || e.t0 === v.Z.ACCESS_RESTRICTED_PROTECTED_BY_USER || e.t0 === v.Z.ACCESS_RESTRICTED_PROTECTED_BY_KAKAO ? 11 : 13; break; case 6: return this.onComplete(t), e.abrupt("return", !1); case 8: return e.abrupt("return", !0); case 9: return this.exitDormantWithPassword((function () { n.pollTalkLogin() })), e.abrupt("return", !1); case 11: return this.restrictedReasonStore.startFromLogin(t), e.abrupt("return", !1); case 13: return (0, _.runInAction)((function () { n.isTalkLoginError = !0 })), e.abrupt("return", !1); case 15: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }() }]), n }(y.u), K = function (e) { (0, h.Z)(n, e); var t = B(n); function n() { return (0, l.Z)(this, n), t.apply(this, arguments) } return (0, u.Z)(n, [{ key: "blockedAdditionalAuth", value: function (e) { this.store.showDialog({ type: "blockedAdditionalAuth", onSubmit: e }) } }, { key: "requireAdditionalAuth", value: function (e) { this.store.showDialog({ type: "requireAdditionalAuth", onSubmit: e }) } }, { key: "agreeTalkPhoneNumberTerm", value: function (e, t) { this.store.showDialog({ type: "agreeTalkPhoneNumberTerm", onSubmit: t, termUrl: e }) } }, { key: "exitDormant", value: function (e) { this.store.showDialog({ type: "exitDormant", onSubmit: e }) } }, { key: "dintReceiveTms", value: function (e) { this.store.showDialog({ type: "dintReceiveTms", onSubmit: e }) } }, { key: "deviceLoginError", value: function () { this.store.showDialog({ type: "deviceLoginError" }) } }]), n }(b.v), M = { login: "page-login", webTalkLogin: "page-web-talk-login", additionalAuth: "talk_tms_auth" }; var Q = n(4730), Y = n(42197), $ = n(47008), G = n(20624), q = n(80144), X = n(94184), H = n.n(X); function J(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function z(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? J(Object(n), !0).forEach((function (t) { (0, r.Z)(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : J(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } function ee(e) { var t = function () { if ("undefined" === typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" === typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(); return function () { var n, r = (0, f.Z)(e); if (t) { var i = (0, f.Z)(this).constructor; n = Reflect.construct(r, arguments, i) } else n = r.apply(this, arguments); return (0, m.Z)(this, n) } } var te = function (e) { (0, h.Z)(n, e); var t = ee(n); function n(e) { var i; (0, l.Z)(this, n); var o = [z(z({}, k.FU.loginKey), {}, { value: e.defaultEmail, hooks: { onFocus: e.hidePassword ? function () { i.showPasswordField() } : void 0 } })]; !e.hidePassword && o.push(k.FU.password), !e.hidePassword && o.push(z(z({}, k.FU.staySignedIn), {}, { value: e.defaultStaySignIn })), e.showCaptcha && o.push(k.FU.captcha); var s = { onInit: function (t) { e.defaultError && t.invalidate(e.defaultError) }, onSuccess: function (t) { e.onSubmit(t) }, onError: function (e) { if (e.hasError) { var t = e.errors(), n = Object.keys(t).find((function (e) { return t[e] })); if (n) { var r, i; if (n === k.FU.captcha.name) null === (r = e.$(k.FU.captcha.name)) || void 0 === r || r.focus(); else null === (i = e.$(k.FU.loginKey.name)) || void 0 === i || i.focus(); e.invalidate(t[n]) } } } }; return i = t.call(this, { fields: o }, { hooks: s }), (0, r.Z)((0, d.Z)(i), "defaultCountryCode", void 0), (0, r.Z)((0, d.Z)(i), "defaultStaySignIn", void 0), i.defaultCountryCode = e.defaultCountryCode, i.defaultStaySignIn = e.defaultStaySignIn, i } return (0, u.Z)(n, [{ key: "options", value: function () { var e = (0, S.Z)((0, f.Z)(n.prototype), "options", this).call(this); return z(z({}, e), {}, { showErrorsOnBlur: !1, showErrorsOnChange: !1, showErrorsOnClear: !1, validateOnInit: !1, validateOnBlur: !1, validateOnChange: !1, showErrorsOnSubmit: !0, validateOnSubmit: !0 }) } }, { key: "showEmailField", value: function () { var e = this; this.has(k.FU.loginKey.name) || (0, _.runInAction)((function () { e.del(k.FU.isoCode.name), e.del(k.FU.loginPhoneNumber.name), e.add(k.FU.loginKey) })) } }, { key: "showPhoneField", value: function () { var e = this; this.has(k.FU.loginKey.name) && (0, _.runInAction)((function () { var t = e.$(k.FU.loginKey.name).value; e.del(k.FU.loginKey.name), e.add(z(z({}, k.FU.isoCode), {}, { value: e.defaultCountryCode })), e.add(z(z({}, k.FU.loginPhoneNumber), {}, { value: t })) })) } }, { key: "showCaptchaField", value: function () { this.has(k.FU.captcha.name) || this.add(k.FU.captcha) } }, { key: "resetCaptchaField", value: function () { this.has(k.FU.captcha.name) && this.$(k.FU.captcha.name).reset() } }, { key: "showPasswordField", value: function () { var e = this; this.has(k.FU.password.name) || (0, _.runInAction)((function () { e.add(k.FU.password), e.add(z(z({}, k.FU.staySignedIn), {}, { value: e.defaultStaySignIn })) })) } }, { key: "hidePasswordField", value: function () { var e = this; this.has(k.FU.password.name) && (0, _.runInAction)((function () { e.del(k.FU.password.name), e.del(k.FU.staySignedIn.name) })) } }]), n }(n(16805).I); function ne(e) { var t = (0, a.uz)().initState(); t.form ? t.needUpdate && (t.needUpdate = !1, t.reset()) : t.form = new te(e); var n = t.form; return (0, i.useEffect)((function () { e.showCaptcha && n.showCaptchaField() }), [e.showCaptcha]), (0, i.useEffect)((function () { e.hidePassword || n.showPasswordField() }), [e.hidePassword]), n } var re = n(69532), ie = n(26999), oe = n(50353), se = n(32979), ae = n(33727), ce = n(83322), le = n(85893), ue = ["type"], de = ["termUrl"], he = ["defaultEmail", "defaultCountryCode", "defaultStaySignIn", "showIpSecurity", "onSubmit", "showCaptcha", "webType", "loginUrl", "continueUrl"], me = ["timer", "isTalkLoginError", "onTalkLogin", "showPasswordAndStaySign", "defaultEmail", "defaultCountryCode", "defaultStaySignIn", "onSubmit", "showIpSecurity", "showCaptcha", "loginUrl", "continueUrl"], fe = ["defaultCountryCode", "defaultStaySignIn", "showCaptcha", "onSubmit"]; function ge(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function pe(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? ge(Object(n), !0).forEach((function (t) { (0, r.Z)(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : ge(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } var ye = (0, s.Pi)((function (e) { var t = e.store; (0, i.useEffect)((function () { t.loadDialogs("login", ve) }), []); var n = { defaultEmail: t.loginContext.defaultEmail, defaultCountryCode: t.loginContext.defaultCountryCode, defaultStaySignIn: t.loginContext.defaultStaySignIn, showIpSecurity: t.loginContext.showIpSecurity, showStaySignIn: t.loginContext.showStaySignIn, webType: t.loginContext.webType, loginUrl: t.loginContext.loginUrl, continueUrl: t.loginContext.continueUrl, needCountryCode: t.needCountryCode, showCaptcha: t.showCaptcha, showTip: !0, gotoQRLogin: function (e) { return t.gotoQRLogin(e) }, onSubmit: function (e) { return t.login(e) } }; switch (t.step) { case "login": return (0, le.jsx)(Se, pe(pe({}, n), {}, { showQrLogin: t.loginContext.showQrLogin })); case "webTalkLogin": return (0, le.jsx)(be, pe(pe({}, n), {}, { timer: t.talkLoginTimer, isTalkLoginError: t.isTalkLoginError, onTalkLogin: function () { return t.loginByTalk() }, showPasswordAndStaySign: t.showPasswordAndStaySign })); case "deviceFormLogin": return (0, le.jsx)(ke, pe(pe({}, n), {}, { showQrLogin: !1, showTip: !1 })); case "additionalAuth": var r = function () { var e = (0, c.Z)(p().mark((function e() { return p().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, t.additionalAuth(!0); case 2: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(); return (0, le.jsx)(xe, { timer: t.additionalAuthTimer, onSubmit: r, onDoNotReceive: function () { t.dialogs.dintReceiveTms((function () { t.gotoLogin() })) }, phoneNumber: t.talkPhoneNumber, showSubmit: t.additionalAuthShowSubmit }); default: return null } })); function ve(e) { var t = e.type, n = (0, Q.Z)(e, ue); switch (t) { case "agreeTalkPhoneNumberTerm": return (0, le.jsx)(_e, pe(pe({}, n), {}, { termUrl: n.termUrl })); case "exitDormant": return (0, le.jsx)(re.UO, pe({ scope: "dialog.dormancy", onelineBtn: !0, highlight: !1 }, n)); case "dintReceiveTms": return (0, le.jsx)(re.uc, pe({ scope: "talk_tms_auth.dialog.didnt_receive" }, n)); case "blockedAdditionalAuth": return (0, le.jsx)(re.uc, pe({ scope: "talk_tms_auth.dialog.blocked" }, n)); case "requireAdditionalAuth": return (0, le.jsx)(re.uc, pe({ scope: "talk_tms_auth.dialog.required" }, n)); case "deviceLoginError": return (0, le.jsx)(re.uc, pe({ scope: "dialog.device_form_login.error.restricted" }, n)); default: return null } } function _e(e) { var t = e.termUrl, n = (0, Q.Z)(e, de), r = (0, Y.Z)({ scope: "dialog.talk_phone_agree" }).t; return (0, le.jsx)(re.uc, pe(pe({}, n), {}, { scope: "dialog.talk_phone_agree", highlight: !0, children: (0, le.jsx)(ie.Z, { className: "link_txt", href: t, target: "_blank", children: r("link_url") }) })) } var Se = (0, s.Pi)((function (e) { var t = e.defaultEmail, n = e.defaultCountryCode, r = e.defaultStaySignIn, i = e.showIpSecurity, o = e.onSubmit, s = e.showCaptcha, a = e.webType, c = e.loginUrl, l = e.continueUrl, u = (0, Q.Z)(e, he), d = (0, Y.Z)({ scope: "page_login" }).t, h = (0, se.u)("signup", "find_account", "find_password"), m = (0, ce.G8)(h.signup, { continue: l }), f = (0, ce.G8)(h.find_account, { continue: c }), g = (0, ce.G8)(h.find_password, { continue: c }), p = ne({ defaultEmail: t, defaultCountryCode: n, defaultStaySignIn: r, defaultError: i ? d("ip_security_error") : void 0, showCaptcha: s, onSubmit: o }); return (0, le.jsx)($.Z, { children: (0, le.jsx)("div", { className: "cont_login", children: (0, le.jsxs)("div", { className: "login_kakaomail", children: [(0, le.jsx)(we, pe(pe({}, u), {}, { form: p })), (0, le.jsxs)("div", { className: H()("info_user", "auth" === a && "align_center"), children: [(0, le.jsx)("a", { href: m, className: "link_join", children: d("signup") }), (0, le.jsxs)("ul", { className: "list_user", children: [(0, le.jsx)("li", { children: (0, le.jsx)("a", { href: f, className: "link_user", children: d("find_account") }) }), (0, le.jsx)("li", { children: (0, le.jsx)("a", { href: g, className: "link_user", children: d("find_password") }) })] })] })] }) }) }) })), be = (0, s.Pi)((function (e) { var t = e.timer, n = e.isTalkLoginError, r = e.onTalkLogin, i = e.showPasswordAndStaySign, o = e.defaultEmail, s = e.defaultCountryCode, a = e.defaultStaySignIn, c = e.onSubmit, l = e.showIpSecurity, u = e.showCaptcha, d = e.loginUrl, h = e.continueUrl, m = (0, Q.Z)(e, me), f = (0, Y.Z)({ scope: "page_login" }).t, g = (0, se.u)("signup", "find_account", "find_password"), p = (0, ce.G8)(g.signup, { continue: h }), y = (0, ce.G8)(g.find_account, { continue: d }), v = (0, ce.G8)(g.find_password, { continue: d }), _ = ne({ defaultEmail: o, defaultCountryCode: s, defaultStaySignIn: a, defaultError: l ? f("ip_security_error") : void 0, hidePassword: !n && !i, showCaptcha: u, onSubmit: c }); return (0, ae.Z)({ timer: t }), (0, le.jsx)($.Z, { children: (0, le.jsxs)("div", { className: H()("login_kakaotalk", n && "login_fail"), children: [(0, le.jsx)("h2", { className: "screen_out", children: "\uce74\uce74\uc624\ud1a1\uc73c\ub85c \ub85c\uadf8\uc778" }), !n && (0, le.jsxs)("div", { className: "intro_talk", children: [(0, le.jsxs)("p", { className: "txt_info", children: [f("talk_login_desc1"), (0, le.jsx)("br", {}), f("talk_login_desc2")] }), (0, le.jsx)("div", { className: "confirm_btn", children: (0, le.jsxs)("button", { className: "btn_g highlight", type: "button", onClick: r, children: [(0, le.jsx)("span", { className: "ico_account ico_talk" }), f("talk_login_btn")] }) })] }), n && (0, le.jsx)("div", { className: "intro_talk", children: (0, le.jsxs)("p", { className: "txt_info txt_info2", children: [f("talk_login.fail_header1"), (0, le.jsx)("br", {}), f("talk_login.fail_header2")] }) }), (0, le.jsxs)("div", { className: "box_login", children: [(0, le.jsx)("strong", { className: "info_desc", children: f("mobile_desc1") }), (0, le.jsx)(we, pe(pe({}, m), {}, { showQrLogin: !1, form: _ })), (0, le.jsx)("div", { className: "info_user", children: (0, le.jsxs)("ul", { className: "list_user", children: [(0, le.jsx)("li", { children: (0, le.jsx)("a", { href: p, className: "link_user", children: f("signup") }) }), (0, le.jsx)("li", { children: (0, le.jsx)("a", { href: y, className: "link_user", children: f("find_account") }) }), (0, le.jsx)("li", { children: (0, le.jsx)("a", { href: v, className: "link_user", children: f("find_password") }) })] }) })] }), (0, le.jsx)("div", { className: "area_login", children: n && (0, le.jsxs)("div", { className: "info_login", children: [(0, le.jsxs)("strong", { className: "tit_txt", children: [f("talk_login.fail_title1"), (0, le.jsx)("br", {}), f("talk_login.fail_title2")] }), (0, le.jsxs)("ul", { className: "list_login", children: [(0, le.jsx)("li", { children: f("talk_login.fail_desc1") }), (0, le.jsx)("li", { children: f("talk_login.fail_desc2") }), (0, le.jsx)("li", { children: f("talk_login.fail_desc3") })] }), (0, le.jsx)("div", { className: "confirm_btn", children: (0, le.jsxs)("button", { className: "btn_g highlight", type: "button", onClick: r, children: [(0, le.jsx)("span", { className: "ico_account ico_talk" }), f("talk_login_btn")] }) })] }) })] }) }) })), ke = (0, s.Pi)((function (e) { var t = e.defaultCountryCode, n = e.defaultStaySignIn, r = e.showCaptcha, i = e.onSubmit, o = (0, Q.Z)(e, fe), s = (0, Y.Z)({ scope: "page_login" }).t, a = ne({ defaultCountryCode: t, defaultStaySignIn: n, showCaptcha: r, onSubmit: i }); return (0, le.jsx)($.Z, { children: (0, le.jsx)("div", { className: "cont_login", children: (0, le.jsx)("div", { className: "login_kakaomail", children: (0, le.jsxs)("div", { className: "box_login", children: [(0, le.jsx)(we, pe(pe({}, o), {}, { form: a })), (0, le.jsx)("span", { className: "desc_login", children: s("device_form_login.description") })] }) }) }) }) })), xe = (0, s.Pi)((function (e) { var t = e.timer, n = e.phoneNumber, r = e.showSubmit, i = e.onSubmit, o = e.onDoNotReceive, s = (0, Y.Z)({ scope: "talk_tms_auth" }).t; return (0, ae.Z)({ timer: t }), (0, le.jsx)($.Z, { children: (0, le.jsxs)("div", { className: "cont_login", children: [(0, le.jsx)("h2", { className: "screen_out", children: "\uce74\uce74\uc624 \uacc4\uc815 \ub85c\uadf8\uc778" }), (0, le.jsxs)("div", { className: "wrap_login", children: [(0, le.jsx)("span", { className: "thumb_login", children: (0, le.jsx)("span", { className: "img_login img_tms" }) }), (0, le.jsx)("strong", { className: "tit_login", children: n }), (0, le.jsxs)("p", { className: "desc_login", children: [s("desc1"), (0, le.jsx)("br", {}), s("desc2")] }), (0, le.jsx)("div", { className: "confirm_btn", children: r && (0, le.jsx)("button", { className: "btn_g", type: "button", onClick: i, children: s("submit") }) }), (0, le.jsx)("a", { className: "link_more", onClick: o, children: s("link") }), !r && (0, le.jsx)("span", { className: "ico_account ico_loading" })] })] }) }) })), we = (0, s.Pi)((function (e) { var t = e.form, n = e.needCountryCode, r = e.showTip, o = e.showStaySignIn, s = e.showQrLogin, a = e.gotoQRLogin, c = (0, se.u)("login_help").login_help, l = (0, Y.Z)({ scope: "page_login" }).t, u = (0, oe.l)({ text: l("phone_number.help") }), d = u.tooltip, h = u.toggleTooltip, m = (0, oe.l)({ text: l("stay_sign_in_tooltip_desc"), className: "tooltip_login", linkText: l("stay_sign_in_tooltip_link"), linkUrl: c }), f = m.tooltip, g = m.toggleTooltip, p = !t.has(k.FU.isoCode.name) && n; return (0, le.jsxs)("form", { onSubmit: t.onSubmit, children: [t.has(k.FU.loginKey.name) && (0, le.jsx)(G.UP, { first: !0, placeholder: l("login_email.placeholder", { scope: "input" }), hint: r ? l("login_email.kakao_id_tip", { scope: "input" }) : void 0, field: t.$(k.FU.loginKey.name), hideError: !0 }), t.has(k.FU.loginPhoneNumber.name) && (0, le.jsx)(G.l2, { first: !0, hideError: !0, isoCode: t.$(k.FU.isoCode.name), phoneNumber: t.$(k.FU.loginPhoneNumber.name), right: { type: "help", onClick: function () { return h() } }, tooltip: d }), t.has(k.FU.password.name) && (0, le.jsxs)(i.Fragment, { children: [(0, le.jsx)(G.UP, { field: t.$(k.FU.password.name), hideError: !0 }), o && (0, le.jsx)("div", { className: "set_login", children: (0, le.jsx)(G.J7, { field: t.$(k.FU.staySignedIn.name), label: l("stay_sign_in"), help: { text: l("stay_sign_in_tooltip_link"), onClick: function () { return g() } }, tooltip: f }) })] }), t.has(k.FU.captcha.name) && (0, le.jsx)(G.R$, { field: t.$(k.FU.captcha.name) }), (t.error || p) && (0, le.jsxs)("div", { className: "box_desc", role: "alert", children: [t.error && (0, le.jsx)(Ce, { error: t.error }), p && (0, le.jsx)(Ee, { showPhone: function () { return t.showPhoneField() } })] }), (0, le.jsxs)("div", { className: "confirm_btn", children: [(0, le.jsx)(G.k4, { highlighted: !0, form: t, children: l("submit") }), s && (0, le.jsxs)(i.Fragment, { children: [(0, le.jsx)("span", { className: "line_or", children: (0, le.jsx)("span", { className: "txt_or", children: l("login_btn_or") }) }), (0, le.jsx)(q.Z, { onClick: function () { return a && a(t) }, children: l("qr_login") })] })] })] }) })); function Ce(e) { var t = e.error; return t && "string" === typeof t ? (0, le.jsx)("p", { className: "desc_error", children: t.split(/\\n/).map((function (e, t) { return (0, le.jsxs)(i.Fragment, { children: [e, (0, le.jsx)("br", {})] }, t) })) }) : (0, le.jsx)(le.Fragment, {}) } function Ee(e) { var t = e.showPhone, n = (0, Y.Z)({ scope: "page_login" }).t; return (0, le.jsxs)(i.Fragment, { children: [(0, le.jsx)("p", { className: "desc_info", children: n("need_country_code.desc") }), (0, le.jsx)("button", { type: "button", className: "link_more", onClick: t, children: n("need_country_code.link") })] }) } var je = n(8895), Te = ["type"], Pe = ["field", "currentCountry"]; function Ze(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function Oe(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? Ze(Object(n), !0).forEach((function (t) { (0, r.Z)(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : Ze(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } var Ae = (0, s.Pi)((function (e) { var t = e.store; switch ((0, i.useEffect)((function () { t.loadDialogs("allow_country", Ne) }), []), t.step) { case "selectEmail": return (0, le.jsx)(Ie, { emails: t.emails, onSubmit: function (e) { t.requestEmailPasscode(e) } }); case "verifyEmailPasscode": return (0, le.jsx)(Re, { timer: t.emailTimer, email: t.email, exceedAllowedCountryLimit: t.exceedAllowedCountryLimit, currentCountry: t.currentCountry, onSubmit: function (e) { t.verifyEmailPasscode(e) }, gotoStart: function () { return t.gotoStart() }, onResend: function (e) { t.dialogs.resendEmail((function () { t.resendEmailPasscode(e) })) } }); case "waitForTmsStatus": return (0, le.jsx)(Le, { timer: t.tmsTimer, maskedPhoneNumber: t.maskedPhoneNumber, currentCountry: t.currentCountry, isTalkThird: t.isTalkThird, exceedAllowedCountryLimit: t.exceedAllowedCountryLimit, gotoEmailPasscode: function () { return t.startWithEmail() }, onSubmit: function () { return t.pollTms() }, onChange: function (e) { return t.addTmsPollingParam(e) } }) }return null })); function Ne(e) { var t = e.type, n = (0, Q.Z)(e, Te); switch (t) { case "blockAllowCountry": return (0, le.jsx)(re.uc, Oe({ scope: "dialog.block" }, n)); case "exceedAllowCountryLimit": return (0, le.jsx)(re.uc, Oe({ scope: "dialog.exceed_allow_country_limit" }, n)); case "verifyTimeout": return (0, le.jsx)(re.uc, Oe({ scope: "dialog.verify_timeout" }, n)); case "resendEmail": return (0, le.jsx)(re.UO, Oe({ scope: "dialog.resend_email_passcode" }, n)); default: return null } } var Ie = (0, s.Pi)((function (e) { var t = e.emails, n = e.onSubmit, r = (0, Y.Z)({ scope: "page_select_email" }).t, i = (0, k.cI)({ fields: [{ name: "email", type: "radio", validator: je.kI.not_blank }], values: { email: t.length > 0 ? t[0].email : "" }, onSubmit: n }); return (0, le.jsx)($.Z, { children: (0, le.jsx)("div", { className: "cont_login", children: (0, le.jsxs)("div", { className: "login_nation", children: [(0, le.jsxs)("h2", { className: "tit_g tit_certify", children: [r("title1"), (0, le.jsx)("br", {}), r("title2")] }), (0, le.jsx)("p", { className: "desc_g", children: r("desc1") }), (0, le.jsx)("div", { className: "login_certify", children: (0, le.jsxs)("form", { onSubmit: i.onSubmit, children: [(0, le.jsxs)("div", { className: "box_certify", children: [(0, le.jsx)("span", { className: "screen_out", children: r("screen_out.emails") }), (0, le.jsx)("div", { className: "wrap_inp", children: t && t.map((function (e, t) { return (0, le.jsx)(G.gu, { id: "r_email_".concat(t), field: i.$("email"), label: e.maskedEmail, value: e.email }, t) })) })] }), (0, le.jsx)("p", { className: "desc_info", children: r("tip") }), (0, le.jsx)("div", { className: "confirm_btn", children: (0, le.jsx)(G.k4, { form: i, highlighted: !1, children: r("submit") }) })] }) })] }) }) }) })), Re = (0, s.Pi)((function (e) { var t = e.timer, n = e.email, r = e.currentCountry, i = e.exceedAllowedCountryLimit, o = e.onResend, s = e.gotoStart, a = e.onSubmit, c = (0, Y.Z)({ scope: "page_verify_email_passcode" }).t, l = [k.FU.emailPasscode]; r && !i && l.push(k.FU.isAddCurrentCountry); var u = (0, k.cI)({ fields: l, onSubmit: a }), d = (0, ae.Z)({ timer: t }).time; return (0, le.jsx)($.Z, { children: (0, le.jsx)("div", { className: "cont_login", children: (0, le.jsxs)("div", { className: "login_nation", children: [(0, le.jsxs)("h2", { className: "tit_g tit_certify", children: [c("title1"), (0, le.jsx)("br", {}), c("title2")] }), (0, le.jsxs)("p", { className: "desc_g", children: [c("desc1"), (0, le.jsx)("br", {}), c("desc2")] }), (0, le.jsxs)("div", { className: "login_certify", children: [(0, le.jsxs)("form", { onSubmit: u.onSubmit, children: [(0, le.jsxs)("div", { className: "box_certify", children: [(0, le.jsx)("span", { className: "screen_out", children: c("screen_out.email") }), (0, le.jsxs)("strong", { className: "info_address", children: [" ", n.maskedEmail, " "] }), (0, le.jsxs)("span", { className: "txt_time", children: [c("remains"), " ", d] })] }), (0, le.jsx)(G.UP, { field: u.$(k.FU.emailPasscode.name), right: { type: "button", text: c("resend"), onClick: function () { return o(u) } }, autoFocus: !0 }), u.has("isAddCurrentCountry") && (0, le.jsx)(Ue, { field: u.$(k.FU.isAddCurrentCountry.name), currentCountry: r }), i && (0, le.jsx)(De, {}), (0, le.jsx)("div", { className: "confirm_btn", children: (0, le.jsx)(G.k4, { form: u, highlighted: !1, children: c("submit") }) })] }), (0, le.jsx)("a", { className: "link_certify", onClick: function (e) { e.preventDefault(), s() }, children: c("link") })] })] }) }) }) })), Le = (0, s.Pi)((function (e) { var t = e.timer, n = e.maskedPhoneNumber, r = e.isTalkThird, i = e.exceedAllowedCountryLimit, o = e.currentCountry, s = e.gotoEmailPasscode, a = e.onSubmit, c = e.onChange, l = r ? "page_verify_tms.talk_third" : "page_verify_tms", u = (0, Y.Z)({ scope: l }).t, d = []; o && !i && d.push(Oe(Oe({}, k.FU.isAddCurrentCountry), {}, { hooks: { onChange: c } })); var h = (0, k.cI)({ fields: d, onSubmit: a }), m = (0, ae.Z)({ timer: t }).time; return (0, le.jsx)($.Z, { children: (0, le.jsx)("div", { className: "cont_login", children: (0, le.jsxs)("div", { className: "login_nation", children: [(0, le.jsxs)("h2", { className: "tit_g tit_certify", children: [u("title1"), (0, le.jsx)("br", {}), u("title2")] }), (0, le.jsxs)("p", { className: "desc_g", children: [u("desc1"), (0, le.jsx)("br", {}), u("desc2"), (0, le.jsx)("br", {}), r && u("desc3")] }), (0, le.jsxs)("div", { className: "login_certify", children: [(0, le.jsxs)("div", { className: "box_certify", children: [(0, le.jsx)("span", { className: "screen_out", children: u("screen_out.phone") }), (0, le.jsx)("strong", { className: "info_address", children: n }), (0, le.jsxs)("span", { className: "txt_time", children: [u("remains"), " ", m] })] }), h.has("isAddCurrentCountry") && (0, le.jsx)(Ue, { field: h.$(k.FU.isAddCurrentCountry.name), currentCountry: o }), i && (0, le.jsx)(De, {}), (0, le.jsx)("a", { className: "link_certify", onClick: s, children: u("link") })] })] }) }) }) })), Ue = (0, s.Pi)((function (e) { var t = e.field, n = e.currentCountry, r = (0, Q.Z)(e, Pe), i = (0, Y.Z)({ scope: "allow_current_country" }).t, o = i(n.toLowerCase(), { scope: "region" }), s = (0, le.jsxs)("span", { className: "txt_check", children: [i("title"), (0, le.jsx)("span", { className: "txt_sub", children: i("desc", { country: o }) })] }); return (0, le.jsx)(G.J7, Oe({ className: "item_certify", field: t, label: s }, r)) })), De = function () { var e = (0, Y.Z)({ scope: "allow_current_country" }).t; return (0, le.jsxs)(le.Fragment, { children: [(0, le.jsxs)("strong", { className: "tit_excess", children: [" ", (0, le.jsx)("span", { className: "ico_account ico_warning" }), e("limit.title")] }), (0, le.jsx)("p", { className: "desc_excess", children: e("limit.desc") })] }) }, Fe = ["type"]; function Ve(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function Be(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? Ve(Object(n), !0).forEach((function (t) { (0, r.Z)(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : Ve(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } var We = (0, s.Pi)((function (e) { var t = e.store; switch ((0, i.useEffect)((function () { t.loadDialogs("two_step_verification", Ke) }), []), t.step) { case "tmsTwoStepVerification": return (0, le.jsx)(Me, { timer: t.tmsTimer, maskedPhoneNumber: t.maskedPhoneNumber, verifyWithEmail: function () { return t.gotoVerifyEmail() }, onChange: function (e) { return t.updateTmsPollingParams(e) } }); case "smsTwoStepVerification": return (0, le.jsx)(Qe, { timer: t.smsTimer, maskedPhoneNumber: t.maskedPhoneNumber, onResend: function (e) { return t.resendSMS(e) }, onSubmit: function (e) { return t.checkSMSPasscode(e) }, verifyWithEmail: function () { return t.gotoVerifyEmail() } }); case "emailTwoStepVerification": return (0, le.jsx)(Ye, { timer: t.emailTimer, maskedEmail: t.maskedEmail, onResend: function (e) { return t.resendEmailPasscode(e) }, onSubmit: function (e) { return t.checkEmailPasscode(e) }, gotoStart: function () { return t.gotoStart() } }); default: return null } })); function Ke(e) { var t = e.type, n = (0, Q.Z)(e, Fe); switch (t) { case "resendSmsPasscode": return (0, le.jsx)(re.UO, Be({ scope: "dialog.resend_sms_passcode" }, n)); case "resendEmailPasscode": return (0, le.jsx)(re.UO, Be({ scope: "dialog.resend_email_passcode" }, n)); case "exceedRequestLimit": return (0, le.jsx)(re.uc, Be({ scope: "dialog.exceed_request_limit" }, n)); case "timeout": return (0, le.jsx)(re.uc, Be({ scope: "dialog.verify_timeout" }, n)); case "blockedTwoStepVerification": return (0, le.jsx)(re.uc, Be({ scope: "dialog.verify_blocked" }, n)); default: return null } } var Me = (0, s.Pi)((function (e) { var t = e.timer, n = e.maskedPhoneNumber, r = e.verifyWithEmail, i = e.onChange, o = (0, Y.Z)({ scope: "two_step_verification" }).t, s = (0, k.cI)({ fields: [Be(Be({}, k.FU.rememberBrowser), {}, { hooks: { onChange: i } })], onSubmit: function () { } }), a = (0, ae.Z)({ timer: t }).time; return (0, le.jsx)($.Z, { children: (0, le.jsxs)("div", { className: "cont_login", children: [(0, le.jsx)("h2", { className: "tit_g tit_certify", children: o("verify.title") }), (0, le.jsxs)("div", { className: "login_certify", children: [(0, le.jsxs)("p", { className: "desc_g", children: [o("verify.tms.desc1"), (0, le.jsx)("br", {}), o("verify.tms.desc2")] }), (0, le.jsxs)("div", { className: "box_certify", children: [(0, le.jsx)("span", { className: "screen_out", children: o("verify.phone_number") }), (0, le.jsx)("strong", { className: "info_address", children: n }), (0, le.jsxs)("span", { className: "txt_time", children: [o("verify.remain_time"), " ", a] })] }), (0, le.jsx)(G.J7, { field: s.$(k.FU.rememberBrowser.name), label: o("verify.remember_browser") }), (0, le.jsx)("a", { className: "link_certify", onClick: r, children: o("change_to_email") })] })] }) }) })), Qe = (0, s.Pi)((function (e) { var t = e.timer, n = e.maskedPhoneNumber, r = e.onSubmit, i = e.onResend, o = e.verifyWithEmail, s = (0, Y.Z)({ scope: "two_step_verification" }).t, a = (0, k.cI)({ fields: [k.FU.smsPasscode, k.FU.rememberBrowser], onSubmit: r }), c = (0, ae.Z)({ timer: t }).time; return (0, le.jsx)($.Z, { children: (0, le.jsxs)("div", { className: "cont_login", children: [(0, le.jsx)("h2", { className: "tit_g tit_certify", children: s("verify.title") }), (0, le.jsxs)("div", { className: "login_certify", children: [(0, le.jsxs)("p", { className: "desc_g", children: [s("verify.sms.desc"), (0, le.jsx)("br", {}), s("verify.enter_passcode")] }), (0, le.jsxs)("form", { onSubmit: a.onSubmit, children: [(0, le.jsxs)("div", { className: "box_certify", children: [(0, le.jsx)("span", { className: "screen_out", children: s("verify.phone_number") }), (0, le.jsx)("strong", { className: "info_address", children: n }), (0, le.jsxs)("span", { className: "txt_time", children: [s("verify.remain_time"), " ", c] })] }), (0, le.jsx)(G.UP, { field: a.$(k.FU.smsPasscode.name), right: { type: "button", text: s("resend"), onClick: function () { return i(a) } }, autoFocus: !0 }), (0, le.jsx)(G.J7, { field: a.$(k.FU.rememberBrowser.name), label: s("verify.remember_browser") }), (0, le.jsx)("div", { className: "confirm_btn", children: (0, le.jsx)(G.k4, { form: a, children: s("submit") }) }), (0, le.jsx)("a", { className: "link_certify", onClick: o, children: s("change_to_email") })] })] })] }) }) })), Ye = (0, s.Pi)((function (e) { var t = e.timer, n = e.maskedEmail, r = e.onSubmit, i = e.onResend, o = e.gotoStart, s = (0, Y.Z)({ scope: "two_step_verification" }).t, a = (0, k.cI)({ fields: [k.FU.emailPasscode, k.FU.rememberBrowser], onSubmit: r }), c = (0, ae.Z)({ timer: t }).time; return (0, le.jsx)($.Z, { children: (0, le.jsxs)("div", { className: "cont_login", children: [(0, le.jsx)("h2", { className: "tit_g tit_certify", children: s("verify.title") }), (0, le.jsxs)("div", { className: "login_certify", children: [(0, le.jsxs)("p", { className: "desc_g", children: [s("verify.email.desc"), (0, le.jsx)("br", {}), s("verify.enter_passcode")] }), (0, le.jsxs)("form", { onSubmit: a.onSubmit, children: [(0, le.jsxs)("div", { className: "box_certify", children: [(0, le.jsx)("span", { className: "screen_out", children: s("verify.email") }), (0, le.jsx)("strong", { className: "info_address", children: n }), (0, le.jsxs)("span", { className: "txt_time", children: [s("verify.remain_time"), " ", c] })] }), (0, le.jsx)(G.UP, { field: a.$(k.FU.emailPasscode.name), right: { type: "button", text: s("resend"), onClick: function () { return i(a) } }, autoFocus: !0 }), (0, le.jsx)(G.J7, { field: a.$(k.FU.rememberBrowser.name), label: s("verify.remember_browser") }), (0, le.jsx)("div", { className: "confirm_btn", children: (0, le.jsx)(G.k4, { form: a, children: s("submit") }) }), (0, le.jsx)("a", { className: "link_certify", onClick: o, children: s("back_to_start") })] })] })] }) }) })), $e = n(51978), Ge = n.n($e), qe = n(63050), Xe = n.n(qe), He = n(82740), Je = n.n(He), ze = n(25806), et = (0, s.Pi)((function (e) { var t = e.children, n = (0, a.oR)().pageStore.page || "", r = function () { switch (n) { case "webTalkLogin": return Ge().root; case "deviceFormLogin": return Je().root; default: return Xe().root } }(), i = function () { switch (n) { case "login": case "webTalkLogin": case "deviceFormLogin": return "logo"; default: return } }(); return (0, le.jsx)(ze.P, { className: tt(n), layoutStyle: r, headerType: i, showFooter: !0, children: t }) })); function tt(e) { if ("webTalkLogin" === e) return "login_talk" } function nt(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function rt(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? nt(Object(n), !0).forEach((function (t) { (0, r.Z)(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : nt(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } var it = (0, s.Pi)((function (e) { var t = e.store, n = (0, a.x6)("login", (function () { return new W(t).start() })); return (0, le.jsxs)(et, { children: [(0, le.jsx)(ye, { store: n }), (0, le.jsx)(Ae, { store: n.allowCountryStore }), (0, le.jsx)(We, { store: n.twoStepVerificationStore })] }) })), ot = (0, o.Z)("login", (function (e) { var t = { os: "android", showQrLogin: !1, showIpSecurity: !1, showWebTalkLogin: !1, showStaySignIn: !0, linkParams: { mode: e && e.mode }, commonParams: { mode: e && e.mode } }; return e && e.showCaptcha && (t = rt(rt({}, t), {}, { needCaptcha: !0 })), e && e.showQrLogin && (t = rt(rt({}, t), {}, { showWebTalkLogin: !1, showQrLogin: !0 })), e && e.showIpSecurity && (t = rt(rt({}, t), {}, { showIpSecurity: !0 })), e && e.showWebTalkLogin && (t = rt(rt({}, t), {}, { showWebTalkLogin: !0 })), e && e.showDeviceFormLogin && (t = rt(rt({}, t), {}, { showWebTalkLogin: !1, showDeviceFormLogin: !0, showFooter: !1 })), t }))(it) }, 33509: function (e, t, n) { (window.__NEXT_P = window.__NEXT_P || []).push(["/login/login", function () { return n(33199) }]) }, 63050: function (e) { e.exports = { root: "BoxLayout_root__Ya1Da", rotate: "BoxLayout_rotate__eb0bd" } }, 51978: function (e) { e.exports = { root: "TalkLogin_root__6jxI0" } }, 82740: function (e) { e.exports = { root: "WideDeviceLogin_root__SFfc_" } } }, function (e) { e.O(0, [53662, 70734, 74534, 54763, 70224, 49774, 92888, 40179], (function () { return t = 33509, e(e.s = t); var t })); var t = e.O(); _N_E = t }]);